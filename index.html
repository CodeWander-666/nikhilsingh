<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COMMANDER SINGH | STRATEGIC OVERVIEW</title>
    <style>
        /* --- MILITARY OS STYLING --- */
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');

        :root {
            --hud-bg: rgba(10, 15, 20, 0.95);
            --hud-border: rgba(0, 243, 255, 0.3);
            --neon: #00f3ff;
            --alert: #ff003c;
            --success: #0aff00;
        }

        body { margin: 0; overflow: hidden; background: #000; font-family: 'Share Tech Mono', monospace; color: var(--neon); }
        canvas { display: block; }

        /* --- TACTICAL HUD --- */
        #hud-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            display: grid;
            grid-template-columns: 300px 1fr 300px;
            grid-template-rows: 60px 1fr 200px;
            padding: 10px; box-sizing: border-box;
            background: radial-gradient(circle at center, transparent 60%, #000 150%);
        }

        /* Top Bar */
        .top-bar {
            grid-column: 1 / -1; display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid var(--hud-border); background: linear-gradient(90deg, var(--hud-bg), transparent);
            padding: 0 20px; pointer-events: auto;
        }
        h1 { font-size: 1.5rem; letter-spacing: 3px; text-transform: uppercase; margin: 0; }
        .status-light { width: 10px; height: 10px; background: var(--success); border-radius: 50%; box-shadow: 0 0 10px var(--success); }

        /* Left Panel: Mission Brief */
        .side-panel {
            grid-row: 2 / 3; background: var(--hud-bg); border: 1px solid var(--hud-border);
            padding: 20px; pointer-events: auto; overflow-y: auto;
            backdrop-filter: blur(10px); opacity: 0.9;
            transform: translateX(-20px); transition: 0.3s;
        }
        .side-panel:hover { transform: translateX(0); opacity: 1; border-color: var(--neon); }

        h2 { font-size: 1rem; border-bottom: 1px solid var(--alert); padding-bottom: 5px; color: var(--alert); }
        p { font-size: 0.8rem; color: #ccc; line-height: 1.6; }

        .mission-btn {
            display: block; width: 100%; padding: 10px; margin-top: 10px;
            background: rgba(0, 243, 255, 0.1); border: 1px solid var(--hud-border);
            color: var(--neon); font-family: inherit; cursor: pointer; text-align: left;
            transition: 0.2s;
        }
        .mission-btn:hover { background: var(--neon); color: #000; }
        .mission-btn.active { border-left: 4px solid var(--alert); background: rgba(255,0,60,0.1); }

        /* Bottom Panel: Console */
        .bottom-panel {
            grid-column: 2 / 3; grid-row: 3 / 4;
            background: rgba(0,0,0,0.8); border-top: 2px solid var(--hud-border);
            padding: 10px; font-size: 0.8rem; pointer-events: none;
            display: flex; flex-direction: column-reverse; /* Newest logs at bottom */
            mask-image: linear-gradient(to bottom, transparent, black 20%);
        }
        .log-entry { margin-bottom: 5px; }
        .log-time { color: #666; margin-right: 10px; }

        /* Loading Screen */
        #loader {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 999;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .loader-bar { width: 300px; height: 2px; background: #333; margin-top: 20px; position: relative; }
        .loader-fill { width: 0%; height: 100%; background: var(--neon); transition: width 0.5s; box-shadow: 0 0 20px var(--neon); }
        
        /* Scanline Overlay */
        .scanlines {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%);
            background-size: 100% 4px; pointer-events: none; z-index: 50;
        }

    </style>
</head>
<body>

    <div class="scanlines"></div>

    <div id="loader">
        <div style="font-size: 1.5rem; letter-spacing: 5px;">ESTABLISHING SATELLITE UPLINK</div>
        <div class="loader-bar"><div class="loader-fill" id="load-bar"></div></div>
        <div style="margin-top: 10px; font-size: 0.8rem; color: #555;">ENCRYPTING CONNECTION...</div>
    </div>

    <div id="hud-layer">
        
        <div class="top-bar">
            <div style="display: flex; align-items: center; gap: 15px;">
                <div class="status-light"></div>
                <h1>NIKHIL SINGH</h1>
                <span style="font-size: 0.8rem; color: #aaa;">// COMMANDER [AI_DIVISION]</span>
            </div>
            <div id="clock">00:00:00 ZULU</div>
        </div>

        <div class="side-panel" style="grid-column: 1 / 2;">
            <h2>ACTIVE OPERATIONS</h2>
            <div id="mission-list">
                </div>
        </div>

        <div class="side-panel" style="grid-column: 3 / 4; text-align: right; transform: translateX(20px);">
            <h2>TARGET INTEL</h2>
            <div id="intel-display">
                <p>SELECT A MISSION TO VIEW INTEL.</p>
                <div style="margin-top: 20px; border: 1px solid #333; height: 150px; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center;">
                    [NO SIGNAL]
                </div>
            </div>
            <button class="mission-btn" style="text-align: center; margin-top: 20px;" onclick="deployUnit()">DEPLOY UNIT</button>
        </div>

        <div class="bottom-panel" id="console-log">
            <div class="log-entry"><span class="log-time">SYSTEM</span> Ready for command.</div>
        </div>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://unpkg.com/three@0.128.0/examples/js/controls/MapControls.js"></script>
    <script src="https://unpkg.com/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
    <script src="https://unpkg.com/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
    <script src="https://unpkg.com/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>

    <script>
        // --- 1. STRATEGY ENGINE CONFIG ---
        const GameState = {
            selectedMission: null,
            cameraTarget: new THREE.Vector3(0, 0, 0),
            missions: [
                { id: 1, code: "OP_NOVUS", name: "NovusFace AI", loc: { x: -10, z: -10 }, desc: "Deploy DeepFake countermeasures. High priority target.", status: "ACTIVE" },
                { id: 2, code: "OP_TUBE", name: "TubeMan Protocol", loc: { x: 10, z: -10 }, desc: "Secure video extraction pipeline.", status: "STABLE" },
                { id: 3, code: "OP_SEO", name: "RankMaster", loc: { x: 0, z: 10 }, desc: "Automated ranking warfare bot.", status: "DEPLOYED" }
            ]
        };

        // --- 2. SCENE SETUP (The Holotable) ---
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x050505);
        scene.fog = new THREE.FogExp2(0x050505, 0.02);

        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 1000);
        camera.position.set(0, 20, 30); // RTS View angle

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        document.body.appendChild(renderer.domElement);

        // Map Controls (RTS Style Pan/Zoom)
        const controls = new THREE.MapControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.screenSpacePanning = false;
        controls.minDistance = 10;
        controls.maxDistance = 50;
        controls.maxPolarAngle = Math.PI / 2 - 0.1;

        // --- 3. TERRAIN GENERATION (The 4D Grid) ---
        const gridHelper = new THREE.GridHelper(100, 100, 0x00f3ff, 0x111111);
        scene.add(gridHelper);

        // Animated Terrain Mesh
        const geometry = new THREE.PlaneGeometry(100, 100, 50, 50);
        const material = new THREE.MeshBasicMaterial({ 
            color: 0x00f3ff, 
            wireframe: true, 
            transparent: true, 
            opacity: 0.1 
        });
        const terrain = new THREE.Mesh(geometry, material);
        terrain.rotation.x = -Math.PI / 2;
        scene.add(terrain);

        // --- 4. MISSION MARKERS (Bases) ---
        const markers = [];
        
        GameState.missions.forEach(mission => {
            // The Base
            const baseGeo = new THREE.CylinderGeometry(0, 1.5, 3, 4, 1);
            const baseMat = new THREE.MeshBasicMaterial({ color: 0x00f3ff, wireframe: true });
            const base = new THREE.Mesh(baseGeo, baseMat);
            base.position.set(mission.loc.x, 1.5, mission.loc.z);
            scene.add(base);

            // The "Shield" (Pulsing Sphere)
            const shieldGeo = new THREE.SphereGeometry(2, 16, 16);
            const shieldMat = new THREE.MeshBasicMaterial({ color: 0x00f3ff, transparent: true, opacity: 0.2, wireframe: true });
            const shield = new THREE.Mesh(shieldGeo, shieldMat);
            shield.position.copy(base.position);
            scene.add(shield);

            markers.push({ mesh: base, shield: shield, data: mission });
            
            // Add Beacon Beam
            const beamGeo = new THREE.CylinderGeometry(0.1, 0.1, 50, 8);
            const beamMat = new THREE.MeshBasicMaterial({ color: 0x00f3ff, transparent: true, opacity: 0.5 });
            const beam = new THREE.Mesh(beamGeo, beamMat);
            beam.position.set(mission.loc.x, 25, mission.loc.z);
            scene.add(beam);
        });

        // --- 5. POST PROCESSING (The Hologram Look) ---
        const composer = new THREE.EffectComposer(renderer);
        const renderPass = new THREE.RenderPass(scene, camera);
        composer.addPass(renderPass);
        const bloomPass = new THREE.UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 1.5, 0.4, 0.85);
        bloomPass.threshold = 0.1;
        bloomPass.strength = 1.2;
        bloomPass.radius = 0.5;
        composer.addPass(bloomPass);

        // --- 6. GAME LOGIC & UI INTERACTION ---
        
        // Raycaster for clicking bases
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();

        window.addEventListener('click', onMouseClick, false);

        function onMouseClick(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = - (event.clientY / window.innerHeight) * 2 + 1;

            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(markers.map(m => m.shield));

            if (intersects.length > 0) {
                // Find which mission was clicked based on position match
                const target = markers.find(m => m.shield === intersects[0].object);
                if (target) selectMission(target.data);
            }
        }

        function selectMission(mission) {
            GameState.selectedMission = mission;
            GameState.cameraTarget.set(mission.loc.x, 0, mission.loc.z);
            
            // Update Intel UI
            const intelHTML = `
                <h3 style="color:#fff">${mission.name}</h3>
                <div style="color:var(--neon); font-size:0.8rem; margin-bottom:10px;">${mission.code} // ${mission.status}</div>
                <p>${mission.desc}</p>
                <div style="margin-top:20px; border:1px solid var(--neon); padding:5px; text-align:center;">
                    <div style="font-size:2rem;">98%</div>
                    <div style="font-size:0.6rem;">SUCCESS PROBABILITY</div>
                </div>
            `;
            document.getElementById('intel-display').innerHTML = intelHTML;
            logToConsole(`TARGET ACQUIRED: ${mission.code}`);
        }

        function logToConsole(text) {
            const consoleDiv = document.getElementById('console-log');
            const time = new Date().toISOString().split('T')[1].split('.')[0];
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.innerHTML = `<span class="log-time">${time}</span> ${text}`;
            consoleDiv.prepend(entry);
        }

        // Initialize UI List
        const missionList = document.getElementById('mission-list');
        GameState.missions.forEach(m => {
            const btn = document.createElement('button');
            btn.className = 'mission-btn';
            btn.innerText = `[${m.code}] ${m.name}`;
            btn.onclick = () => selectMission(m);
            missionList.appendChild(btn);
        });

        // --- 7. ANIMATION LOOP ---
        let time = 0;
        
        function animate() {
            requestAnimationFrame(animate);
            time += 0.01;

            // Animate Terrain (The Living Map)
            const positions = terrain.geometry.attributes.position.array;
            for(let i = 0; i < positions.length; i += 3) {
                // Perlin-like noise simulation
                positions[i+2] = Math.sin((positions[i] / 10) + time) * 2 + Math.cos((positions[i+1] / 10) + time) * 2;
            }
            terrain.geometry.attributes.position.needsUpdate = true;

            // Animate Markers
            markers.forEach(m => {
                m.mesh.rotation.y += 0.01;
                m.shield.scale.setScalar(1 + Math.sin(time * 2) * 0.1); // Pulse
            });

            // Smooth Camera Pan to Target
            controls.target.lerp(GameState.cameraTarget, 0.05);
            controls.update();

            composer.render();
        }

        // --- BOOT UP ---
        setTimeout(() => {
            document.getElementById('load-bar').style.width = '100%';
            setTimeout(() => {
                document.getElementById('loader').style.display = 'none';
                logToConsole("SYSTEM ONLINE. AWAITING ORDERS.");
                animate();
            }, 500);
        }, 1000);

        // Clock
        setInterval(() => {
            document.getElementById('clock').innerText = new Date().toISOString().split('T')[1].split('.')[0] + " ZULU";
        }, 1000);

        window.deployUnit = function() {
            if(!GameState.selectedMission) {
                logToConsole("ERROR: NO TARGET SELECTED.");
                return;
            }
            logToConsole(`DEPLOYING ASSETS TO ${GameState.selectedMission.code}...`);
            // Here you could trigger a particle effect or redirect to the project link
            setTimeout(() => {
                logToConsole("UNIT DEPLOYED. ESTABLISHING LINK...");
                // window.open('your-project-link', '_blank');
            }, 1000);
        };

        // Resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            composer.setSize(window.innerWidth, window.innerHeight);
        });

    </script>
</body>
</html>
